name: titanic_pipeline

tasks:
  - task_key: data_prep
    description: "Preprocess Titanic data"
    notebook_path: /Repos/vipultak7171/titanic-ml-pipeline/notebooks/01_data_prep
    cluster:
      new_cluster:
        spark_version: "13.2.x-scala2.12"
        node_type_id: "i3.xlarge"
        num_workers: 1

  - task_key: train
    description: "Train Titanic model"
    depends_on: [data_prep]
    notebook_path: /Repos/vipultak7171/titanic-ml-pipeline/notebooks/02_train
    cluster:
      existing_cluster_id: "89738681c3f65515"   # Your Serverless cluster ID

  - task_key: evaluate
    description: "Evaluate model"
    depends_on: [train]
    notebook_path: /Repos/vipultak7171/titanic-ml-pipeline/notebooks/03_evaluate
    cluster:
      existing_cluster_id: "89738681c3f65515"

  - task_key: register
    description: "Register model in MLflow"
    depends_on: [evaluate]
    notebook_path: /Repos/vipultak7171/titanic-ml-pipeline/notebooks/04_register_model
    cluster:
      existing_cluster_id: "89738681c3f65515"


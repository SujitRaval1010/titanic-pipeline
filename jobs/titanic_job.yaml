# jobs/titanic_job.yaml
name: titanic_pipeline

# Run all tasks in repo context
git_source:
  git_url: https://github.com/SujitRaval1010/titanic-pipeline
  git_provider: gitHub
  git_branch: main

tasks:
  - task_key: data_prep
    description: "Step 1: Data Preprocessing"
    notebook_task:
      notebook_path: "/Repos/your-username/titanic-pipeline/notebooks/01_data_prep"
    new_cluster:
      spark_version: "13.3.x-scala2.12"
      node_type_id: "Standard_DS3_v2"
      num_workers: 2

  - task_key: train
    description: "Step 2: Model Training"
    depends_on: [data_prep]
    notebook_task:
      notebook_path: "/Repos/your-username/titanic-pipeline/notebooks/02_train"
    new_cluster:
      spark_version: "13.3.x-scala2.12"
      node_type_id: "Standard_DS3_v2"
      num_workers: 2

  - task_key: evaluate
    description: "Step 3: Model Evaluation"
    depends_on: [train]
    notebook_task:
      notebook_path: "/Repos/your-username/titanic-pipeline/notebooks/03_evaluate"
    new_cluster:
      spark_version: "13.3.x-scala2.12"
      node_type_id: "Standard_DS3_v2"
      num_workers: 2

  - task_key: register
    description: "Step 4: Model Registration"
    depends_on: [evaluate]
    notebook_task:
      notebook_path: "/Repos/your-username/titanic-pipeline/notebooks/04_register_model"
    new_cluster:
      spark_version: "13.3.x-scala2.12"
      node_type_id: "Standard_DS3_v2"
      num_workers: 2

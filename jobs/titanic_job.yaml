tasks:
  - task_key: data_prep
    job_cluster_key: shared_cluster
    notebook_task:
      notebook_path: "/Repos/SujitRaval1010/titanic-pipeline/notebooks/01_data_prep"
    environment_variables:
      MLFLOW_TRACKING_URI: databricks
      MLFLOW_EXPERIMENT_NAME: /Shared/titanic
      ACCURACY_THRESHOLD: 0.8
      MLFLOW_MODEL_NAME: workspace.my_schema.titanic_model
      MLFLOW_MODEL_ALIAS: staging

  - task_key: train
    depends_on: [data_prep]
    job_cluster_key: shared_cluster
    notebook_task:
      notebook_path: "/Repos/SujitRaval1010/titanic-pipeline/notebooks/02_train"
    environment_variables:
      MLFLOW_TRACKING_URI: databricks
      MLFLOW_EXPERIMENT_NAME: /Shared/titanic
      ACCURACY_THRESHOLD: 0.8
      MLFLOW_MODEL_NAME: workspace.my_schema.titanic_model
      MLFLOW_MODEL_ALIAS: staging

  - task_key: evaluate
    depends_on: [train]
    job_cluster_key: shared_cluster
    notebook_task:
      notebook_path: "/Repos/SujitRaval1010/titanic-pipeline/notebooks/03_evaluate"
    environment_variables:
      MLFLOW_TRACKING_URI: databricks
      MLFLOW_EXPERIMENT_NAME: /Shared/titanic
      ACCURACY_THRESHOLD: 0.8
      MLFLOW_MODEL_NAME: workspace.my_schema.titanic_model
      MLFLOW_MODEL_ALIAS: staging

  - task_key: register
    depends_on: [evaluate]
    job_cluster_key: shared_cluster
    notebook_task:
      notebook_path: "/Repos/SujitRaval1010/titanic-pipeline/notebooks/04_register_model"
    environment_variables:
      MLFLOW_TRACKING_URI: databricks
      MLFLOW_EXPERIMENT_NAME: /Shared/titanic
      ACCURACY_THRESHOLD: 0.8
      MLFLOW_MODEL_NAME: workspace.my_schema.titanic_model
      MLFLOW_MODEL_ALIAS: staging
